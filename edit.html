<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</title>

<script>
const API = "YOUR_WEB_APP_URL";

let questions = [];

function loadQuestions(){
  fetch(API+"?action=getQuestions")
  .then(r=>r.json())
  .then(data=>{
    questions = data;
    render();
  });
}

function render(){
  const list = document.getElementById("list");
  list.innerHTML = "";

  questions.forEach((q,i)=>{
    list.innerHTML += `
    <div class="row">
      <input value="${q[0]}" onchange="questions[${i}][0]=this.value">
      <input value="${q[1]}" onchange="questions[${i}][1]=this.value">
      <button onclick="removeQ(${i})">‡∏•‡∏ö</button>
    </div>`;
  });
}

function addQ(){
  questions.push(["","üòÄ"]);
  render();
}

function removeQ(i){
  questions.splice(i,1);
  render();
}

function save(){
  const data = questions.map(q=>({
    question:q[0],
    emoji:q[1]
  }));

  fetch(API+"?action=saveQuestions",{
    method:"POST",
    body:JSON.stringify(data)
  }).then(()=>alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß"));
}

function refreshForm(){
  loadQuestions();
}

window.onload=loadQuestions;
</script>

<button onclick="addQ()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</button>
<button onclick="save()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
<button onclick="refreshForm()">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</button>

<div id="list"></div>

<script src="script.js"></script>
</body>
</html>
