<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>จัดการข้อมูล</title>
<script src="script.js"></script>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-blue-50">

<div class="bg-blue-600 text-white p-4 flex justify-center gap-6 font-semibold">
<a href="index.html">แบบประเมิน</a>
<a href="dashboard.html">Dashboard</a>
<a href="edit.html">จัดการข้อมูล</a>
</div>

<div class="max-w-3xl mx-auto mt-6 bg-white p-6 rounded shadow">

<h1 class="text-xl font-bold mb-4 text-blue-700">
แก้ไขคำถาม
</h1>

<div id="questions"></div>

<input id="newQ" placeholder="เพิ่มคำถามใหม่"
class="border p-2 w-full mt-4 rounded">

<button onclick="addQ()" 
class="bg-green-500 text-white px-4 py-2 mt-2 rounded">
เพิ่มคำถาม
</button>

<button onclick="saveQ()" 
class="bg-blue-600 text-white px-4 py-2 mt-4 rounded">
บันทึกทั้งหมด
</button>

</div>

<script>
let questionData=[];

function loadQ(){
getQuestions().then(data=>{
questionData=data;
render();
});
}

function render(){
let box=document.getElementById("questions");
box.innerHTML="";
questionData.forEach((row,i)=>{
box.innerHTML+=`
<div class="flex gap-2 mb-2">
<input value="${row[0]}" 
onchange="questionData[${i}][0]=this.value"
class="border p-2 flex-1 rounded">
<button onclick="delQ(${i})"
class="bg-red-500 text-white px-3 rounded">
ลบ
</button>
</div>
`;
});
}

function addQ(){
questionData.push([newQ.value]);
newQ.value="";
render();
}

function delQ(i){
questionData.splice(i,1);
render();
}

function saveQ(){
saveQuestions(questionData).then(()=>{
alert("บันทึกสำเร็จ");
});
}

loadQ();
</script>

</body>
</html>
