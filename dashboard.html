<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<nav>
<a href="index.html">แบบประเมิน</a> |
<a href="dashboard.html">Dashboard</a> |
<a href="edit.html">แก้ไข</a>
</nav>
<hr>

<h2>Dashboard</h2>
<canvas id="chart"></canvas>

<script src="script.js"></script>
<script>
async function load(){
  const data = await getData();
  if(data.length<=1) return;

  const rows=data.slice(1);
  const sums=[];
  rows.forEach(r=>{
    r.slice(1).forEach((v,i)=>{
      sums[i]=(sums[i]||0)+Number(v);
    });
  });

  const avg=sums.map(s=> (s/rows.length).toFixed(2));

  new Chart(document.getElementById("chart"),{
    type:"bar",
    data:{
      labels: avg.map((_,i)=>"ข้อ "+(i+1)),
      datasets:[{
        label:"ค่าเฉลี่ย",
        data:avg
      }]
    }
  });
}

load();
</script>

</body>
</html>
