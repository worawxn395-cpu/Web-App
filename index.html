<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-4">

<div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow">

<h1 class="text-2xl font-bold mb-4 text-center">‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à</h1>

<div class="flex gap-2 mb-6 justify-center">
  <button onclick="showPage('form')" class="bg-blue-500 text-white px-4 py-2 rounded">‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</button>
  <button onclick="showPage('dashboard')" class="bg-green-500 text-white px-4 py-2 rounded">Dashboard</button>
  <button onclick="showPage('edit')" class="bg-purple-500 text-white px-4 py-2 rounded">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</button>
</div>

<!-- FORM -->
<div id="formPage">
  <input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠" class="border p-2 w-full mb-2">
  <input id="number" placeholder="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà" class="border p-2 w-full mb-2">
  <select id="gender" class="border p-2 w-full mb-2">
    <option>‡∏ä‡∏≤‡∏¢</option>
    <option>‡∏´‡∏ç‡∏¥‡∏á</option>
  </select>
  <input id="classroom" placeholder="‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="border p-2 w-full mb-4">

  <div id="questions"></div>

  <textarea id="suggestion" placeholder="‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞" class="border p-2 w-full mt-4"></textarea>

  <button onclick="submitForm()" class="bg-blue-600 text-white px-4 py-2 rounded mt-4 w-full">
    ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
  </button>
</div>

<!-- DASHBOARD -->
<div id="dashboardPage" class="hidden">
  <h2 class="text-xl font-bold mb-4">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>
  <div id="dashboardData"></div>
</div>

<!-- EDIT -->
<div id="editPage" class="hidden">
  <h2 class="text-xl font-bold mb-4">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</h2>
  <div id="editQuestions"></div>
  <button onclick="saveConfig()" class="bg-purple-600 text-white px-4 py-2 rounded mt-4">
    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
  </button>
</div>

</div>

<script>
const API = "YOUR_WEB_APP_URL";

function showPage(page){
  document.getElementById("formPage").classList.add("hidden");
  document.getElementById("dashboardPage").classList.add("hidden");
  document.getElementById("editPage").classList.add("hidden");

  if(page==="form") document.getElementById("formPage").classList.remove("hidden");
  if(page==="dashboard"){ loadDashboard(); document.getElementById("dashboardPage").classList.remove("hidden"); }
  if(page==="edit"){ loadConfig(true); document.getElementById("editPage").classList.remove("hidden"); }
}

async function loadConfig(edit=false){
  const res = await fetch(API+"?action=config");
  const data = await res.json();

  if(!edit){
    const qDiv=document.getElementById("questions");
    qDiv.innerHTML="";
    data.questions.forEach((q,i)=>{
      qDiv.innerHTML+=`
        <p class="mt-3">${q}</p>
        <select id="q${i}" class="border p-2 w-full">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
      `;
    });
  }else{
    const editDiv=document.getElementById("editQuestions");
    editDiv.innerHTML="";
    data.questions.forEach((q,i)=>{
      editDiv.innerHTML+=`
        <input id="editQ${i}" value="${q}" class="border p-2 w-full mb-2">
      `;
    });
  }
}

async function submitForm(){
  const answers=[];
  for(let i=0;i<5;i++){
    answers.push(document.getElementById("q"+i).value);
  }

  await fetch(API,{
    method:"POST",
    body:JSON.stringify({
      type:"response",
      payload:{
        name: name.value,
        number: number.value,
        gender: gender.value,
        classroom: classroom.value,
        answers: answers,
        suggestion: suggestion.value
      }
    })
  });

  alert("‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
}

async function loadDashboard(){
  const res=await fetch(API+"?action=dashboard");
  const data=await res.json();

  document.getElementById("dashboardData").innerHTML=`
    <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${data.total}</p>
    <p>‡∏ä‡∏≤‡∏¢: ${data.gender?.‡∏ä‡∏≤‡∏¢||0}</p>
    <p>‡∏´‡∏ç‡∏¥‡∏á: ${data.gender?.‡∏´‡∏ç‡∏¥‡∏á||0}</p>
    <p>‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠: ${data.avg?.join(", ")||"-"}</p>
  `;
}

async function saveConfig(){
  const questions=[];
  for(let i=0;i<5;i++){
    questions.push(document.getElementById("editQ"+i).value);
  }

  await fetch(API,{
    method:"POST",
    body:JSON.stringify({
      type:"config",
      payload:{questions:questions,emojis:["üò°","üòï","üòê","üòä","üòç"]}
    })
  });

  alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß");
}

loadConfig();
</script>
</body>
</html><!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-4">

<div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow">

<h1 class="text-2xl font-bold mb-4 text-center">‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à</h1>

<div class="flex gap-2 mb-6 justify-center">
  <button onclick="showPage('form')" class="bg-blue-500 text-white px-4 py-2 rounded">‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</button>
  <button onclick="showPage('dashboard')" class="bg-green-500 text-white px-4 py-2 rounded">Dashboard</button>
  <button onclick="showPage('edit')" class="bg-purple-500 text-white px-4 py-2 rounded">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</button>
</div>

<!-- FORM -->
<div id="formPage">
  <input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠" class="border p-2 w-full mb-2">
  <input id="number" placeholder="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà" class="border p-2 w-full mb-2">
  <select id="gender" class="border p-2 w-full mb-2">
    <option>‡∏ä‡∏≤‡∏¢</option>
    <option>‡∏´‡∏ç‡∏¥‡∏á</option>
  </select>
  <input id="classroom" placeholder="‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="border p-2 w-full mb-4">

  <div id="questions"></div>

  <textarea id="suggestion" placeholder="‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞" class="border p-2 w-full mt-4"></textarea>

  <button onclick="submitForm()" class="bg-blue-600 text-white px-4 py-2 rounded mt-4 w-full">
    ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
  </button>
</div>

<!-- DASHBOARD -->
<div id="dashboardPage" class="hidden">
  <h2 class="text-xl font-bold mb-4">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>
  <div id="dashboardData"></div>
</div>

<!-- EDIT -->
<div id="editPage" class="hidden">
  <h2 class="text-xl font-bold mb-4">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</h2>
  <div id="editQuestions"></div>
  <button onclick="saveConfig()" class="bg-purple-600 text-white px-4 py-2 rounded mt-4">
    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
  </button>
</div>

</div>

<script>
const API = "YOUR_WEB_APP_URL";

function showPage(page){
  document.getElementById("formPage").classList.add("hidden");
  document.getElementById("dashboardPage").classList.add("hidden");
  document.getElementById("editPage").classList.add("hidden");

  if(page==="form") document.getElementById("formPage").classList.remove("hidden");
  if(page==="dashboard"){ loadDashboard(); document.getElementById("dashboardPage").classList.remove("hidden"); }
  if(page==="edit"){ loadConfig(true); document.getElementById("editPage").classList.remove("hidden"); }
}

async function loadConfig(edit=false){
  const res = await fetch(API+"?action=config");
  const data = await res.json();

  if(!edit){
    const qDiv=document.getElementById("questions");
    qDiv.innerHTML="";
    data.questions.forEach((q,i)=>{
      qDiv.innerHTML+=`
        <p class="mt-3">${q}</p>
        <select id="q${i}" class="border p-2 w-full">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
      `;
    });
  }else{
    const editDiv=document.getElementById("editQuestions");
    editDiv.innerHTML="";
    data.questions.forEach((q,i)=>{
      editDiv.innerHTML+=`
        <input id="editQ${i}" value="${q}" class="border p-2 w-full mb-2">
      `;
    });
  }
}

async function submitForm(){
  const answers=[];
  for(let i=0;i<5;i++){
    answers.push(document.getElementById("q"+i).value);
  }

  await fetch(API,{
    method:"POST",
    body:JSON.stringify({
      type:"response",
      payload:{
        name: name.value,
        number: number.value,
        gender: gender.value,
        classroom: classroom.value,
        answers: answers,
        suggestion: suggestion.value
      }
    })
  });

  alert("‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
}

async function loadDashboard(){
  const res=await fetch(API+"?action=dashboard");
  const data=await res.json();

  document.getElementById("dashboardData").innerHTML=`
    <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${data.total}</p>
    <p>‡∏ä‡∏≤‡∏¢: ${data.gender?.‡∏ä‡∏≤‡∏¢||0}</p>
    <p>‡∏´‡∏ç‡∏¥‡∏á: ${data.gender?.‡∏´‡∏ç‡∏¥‡∏á||0}</p>
    <p>‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠: ${data.avg?.join(", ")||"-"}</p>
  `;
}

async function saveConfig(){
  const questions=[];
  for(let i=0;i<5;i++){
    questions.push(document.getElementById("editQ"+i).value);
  }

  await fetch(API,{
    method:"POST",
    body:JSON.stringify({
      type:"config",
      payload:{questions:questions,emojis:["üò°","üòï","üòê","üòä","üòç"]}
    })
  });

  alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß");
}

loadConfig();
</script>
</body>
</html><!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-4">

<div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow">

<h1 class="text-2xl font-bold mb-4 text-center">‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à</h1>

<div class="flex gap-2 mb-6 justify-center">
  <button onclick="showPage('form')" class="bg-blue-500 text-white px-4 py-2 rounded">‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</button>
  <button onclick="showPage('dashboard')" class="bg-green-500 text-white px-4 py-2 rounded">Dashboard</button>
  <button onclick="showPage('edit')" class="bg-purple-500 text-white px-4 py-2 rounded">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</button>
</div>

<!-- FORM -->
<div id="formPage">
  <input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠" class="border p-2 w-full mb-2">
  <input id="number" placeholder="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà" class="border p-2 w-full mb-2">
  <select id="gender" class="border p-2 w-full mb-2">
    <option>‡∏ä‡∏≤‡∏¢</option>
    <option>‡∏´‡∏ç‡∏¥‡∏á</option>
  </select>
  <input id="classroom" placeholder="‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="border p-2 w-full mb-4">

  <div id="questions"></div>

  <textarea id="suggestion" placeholder="‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞" class="border p-2 w-full mt-4"></textarea>

  <button onclick="submitForm()" class="bg-blue-600 text-white px-4 py-2 rounded mt-4 w-full">
    ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
  </button>
</div>

<!-- DASHBOARD -->
<div id="dashboardPage" class="hidden">
  <h2 class="text-xl font-bold mb-4">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>
  <div id="dashboardData"></div>
</div>

<!-- EDIT -->
<div id="editPage" class="hidden">
  <h2 class="text-xl font-bold mb-4">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</h2>
  <div id="editQuestions"></div>
  <button onclick="saveConfig()" class="bg-purple-600 text-white px-4 py-2 rounded mt-4">
    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
  </button>
</div>

</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbwurpGtPXtNgFbwlBMQrBHlV_0RMQQCpLhJxcT8kMxnvyY6lsfFbvgweqQVCgPYydSD1Q/exec";

function showPage(page){
  document.getElementById("formPage").classList.add("hidden");
  document.getElementById("dashboardPage").classList.add("hidden");
  document.getElementById("editPage").classList.add("hidden");

  if(page==="form") document.getElementById("formPage").classList.remove("hidden");
  if(page==="dashboard"){ loadDashboard(); document.getElementById("dashboardPage").classList.remove("hidden"); }
  if(page==="edit"){ loadConfig(true); document.getElementById("editPage").classList.remove("hidden"); }
}

async function loadConfig(edit=false){
  const res = await fetch(API+"?action=config");
  const data = await res.json();

  if(!edit){
    const qDiv=document.getElementById("questions");
    qDiv.innerHTML="";
    data.questions.forEach((q,i)=>{
      qDiv.innerHTML+=`
        <p class="mt-3">${q}</p>
        <select id="q${i}" class="border p-2 w-full">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
      `;
    });
  }else{
    const editDiv=document.getElementById("editQuestions");
    editDiv.innerHTML="";
    data.questions.forEach((q,i)=>{
      editDiv.innerHTML+=`
        <input id="editQ${i}" value="${q}" class="border p-2 w-full mb-2">
      `;
    });
  }
}

async function submitForm(){
  const answers=[];
  for(let i=0;i<5;i++){
    answers.push(document.getElementById("q"+i).value);
  }

  await fetch(API,{
    method:"POST",
    body:JSON.stringify({
      type:"response",
      payload:{
        name: name.value,
        number: number.value,
        gender: gender.value,
        classroom: classroom.value,
        answers: answers,
        suggestion: suggestion.value
      }
    })
  });

  alert("‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
}

async function loadDashboard(){
  const res=await fetch(API+"?action=dashboard");
  const data=await res.json();

  document.getElementById("dashboardData").innerHTML=`
    <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${data.total}</p>
    <p>‡∏ä‡∏≤‡∏¢: ${data.gender?.‡∏ä‡∏≤‡∏¢||0}</p>
    <p>‡∏´‡∏ç‡∏¥‡∏á: ${data.gender?.‡∏´‡∏ç‡∏¥‡∏á||0}</p>
    <p>‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠: ${data.avg?.join(", ")||"-"}</p>
  `;
}

async function saveConfig(){
  const questions=[];
  for(let i=0;i<5;i++){
    questions.push(document.getElementById("editQ"+i).value);
  }

  await fetch(API,{
    method:"POST",
    body:JSON.stringify({
      type:"config",
      payload:{questions:questions,emojis:["üò°","üòï","üòê","üòä","üòç"]}
    })
  });

  alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß");
}

loadConfig();
</script>
</body>
</html>
